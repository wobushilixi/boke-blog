<!doctype html>
<html lang='zh-CN'>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <title>iozz的博客</title>
  <link rel="icon" href="https://nodeimg.iozz.cc/uploads/2026/02/Ew97AF9-V_16.jpeg">
  <style>
    :root{
      --bg:#ffffff;
      --text:#0b0b0f;
      --muted:#6b7280;
      --line:#e5e7eb;
      --accent:#111827;
      --card:#ffffff;
    }
    :root.dark{
      --bg:#0b0b0f;
      --text:#f3f4f6;
      --muted:#9ca3af;
      --line:#1f2937;
      --accent:#f9fafb;
      --card:#0f1115;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, SF Pro Text, SF Pro Display, Helvetica Neue, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      text-rendering:optimizeLegibility;
      transition: background .6s ease, color .6s ease;
    }
    .wrap{max-width:980px;margin:0 auto;padding:48px 24px 120px}
    nav{display:flex;gap:24px;align-items:center;justify-content:space-between;margin:24px 0 32px;font-size:14px;color:var(--muted)}
    nav .menu{display:flex;gap:24px;align-items:center}
    nav a{color:var(--accent);text-decoration:none;border-bottom:1px solid transparent;transition:all .3s ease}
    nav a:hover{border-bottom-color:var(--accent)}
    .toggle{border:1px solid var(--line);background:transparent;color:var(--accent);padding:6px 12px;border-radius:999px;cursor:pointer;transition:all .3s ease}
    .toggle:hover{transform:translateY(-1px)}

    .hero{
      border-radius:28px;
      overflow:hidden;
      position:relative;
      height:260px;
      background:#000;
      box-shadow:0 20px 60px rgba(0,0,0,.15);
    }
    .hero img{width:100%;height:100%;object-fit:cover;filter:brightness(.85)}
    .hero .mask{position:absolute;inset:0;background:linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.55))}
    .hero .title{position:absolute;left:32px;bottom:36px;color:#fff}
    .hero h1{margin:0;font-size:34px;letter-spacing:-0.02em}
    .hero .sub{margin-top:8px;font-size:14px;opacity:.9}

    header{display:flex;align-items:center;gap:20px;margin:48px 0 56px}
    .avatar{width:64px;height:64px;border-radius:20px;overflow:hidden;border:1px solid var(--line)}
    .avatar img{width:100%;height:100%;object-fit:cover}

    .card{
      border:1px solid var(--line);
      border-radius:24px;
      padding:36px;
      background:var(--card);
      box-shadow:0 1px 0 rgba(0,0,0,0.02);
      transition:transform .4s cubic-bezier(.2,.8,.2,1), box-shadow .4s cubic-bezier(.2,.8,.2,1), background .6s ease, border-color .6s ease;
    }
    .card:hover{transform:translateY(-4px);box-shadow:0 12px 30px rgba(0,0,0,.06)}
    .meta{color:var(--muted);font-size:14px;margin-bottom:16px}
    h2{margin:0 0 12px;font-size:28px;letter-spacing:-0.01em}
    p{line-height:1.8;font-size:17px;color:var(--text)}
    .stats{margin-top:20px;color:var(--muted);font-size:14px}

    .runtime{margin-top:18px;color:var(--muted);font-size:14px;display:flex;gap:8px;align-items:center}
    .dot{width:6px;height:6px;border-radius:50%;background:#10b981;box-shadow:0 0 12px rgba(16,185,129,.8);animation:pulse 1.2s infinite}
    @keyframes pulse{0%{transform:scale(.9);opacity:.6}50%{transform:scale(1.2);opacity:1}100%{transform:scale(.9);opacity:.6}}
    .runtime-value{display:inline-block;transition:transform .25s ease, opacity .25s ease}
    .runtime-value.bump{transform:translateY(-1px);opacity:.9}

    footer{margin-top:56px;color:var(--muted);font-size:13px;display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .footer-split{color:var(--line)}
  </style>
</head>
<body>
  <div class='wrap'>
    <nav>
      <div class='menu'>
        <a href='https://boke.iozz.cc'>主页</a>
        <a href='https://blog.iozz.cc/'>友链：blog.iozz.cc</a>
      </div>
      <button class='toggle' id='themeToggle'>外观：自动</button>
    </nav>

    <section class='hero'>
      <img src='https://api.xciy.cn/api/sjbz' alt='cover'>
      <div class='mask'></div>
      <div class='title'>
        <h1>iozz的博客</h1>
        <div class='sub'>永远相信好运即将降临！这里</div>
      </div>
    </section>

    <header>
      <div class='avatar'>
        <img src='https://nodeimg.iozz.cc/uploads/2026/02/Ew97AF9-V_16.jpeg' alt='avatar'>
      </div>
      <div>
        <div style='font-size:20px;font-weight:600'>iozz的博客</div>
        <div style='color:var(--muted);margin-top:6px;font-size:14px'>Apple 极简风 · 留白更多 · 丝滑过渡</div>
        <div class='runtime'><span class='dot'></span>建站时间：<span id='runtime' class='runtime-value'>计算中…</span></div>
      </div>
    </header>


    <section class="card" id="postsSection" style="margin-top:28px;">
      <div class="meta">文章</div>
      <h2>最新发布</h2>
      <div id="postsList" style="margin-top:12px;color:var(--muted);">暂无文章</div>
    </section>

    <footer>
      <span>© 2026 boke.iozz.cc</span>
      <span class='footer-split'>·</span>
      <span id='statsFooter'>累计独立 IP 访问：加载中…</span>
    </footer>
  </div>

  <script>
    const root = document.documentElement;
    const btn = document.getElementById('themeToggle');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');

    function applyTheme(mode){
      if(mode === 'dark') root.classList.add('dark');
      else root.classList.remove('dark');
      btn.textContent = '外观：' + (mode === 'auto' ? '自动' : (mode === 'dark' ? '深色' : '浅色'));
    }

    function getMode(){
      return localStorage.getItem('theme') || 'auto';
    }

    function resolveMode(){
      const mode = getMode();
      if(mode === 'auto') return prefersDark.matches ? 'dark' : 'light';
      return mode;
    }

    function sync(){
      const mode = getMode();
      applyTheme(mode === 'auto' ? resolveMode() : mode);
      btn.textContent = '外观：' + (mode === 'auto' ? '自动' : (mode === 'dark' ? '深色' : '浅色'));
    }

    btn.addEventListener('click', () => {
      const mode = getMode();
      const next = mode === 'auto' ? 'light' : mode === 'light' ? 'dark' : 'auto';
      localStorage.setItem('theme', next);
      sync();
    });

    prefersDark.addEventListener('change', () => {
      if(getMode() === 'auto') sync();
    });

    sync();

    fetch('/api/visit')
      .then(r => r.json())
      .then(d => {
        const el = document.getElementById('statsFooter');
        el.textContent = '累计独立 IP 访问：' + d.uniqueIps;
      })
      .catch(() => {
        const el = document.getElementById('statsFooter');
        el.textContent = '累计独立 IP 访问：暂不可用';
      });

    // runtime counter
    const start = new Date('2026-02-06T20:00:00+08:00').getTime();
    const runtimeEl = document.getElementById('runtime');
    function tick(){
      const now = Date.now();
      let diff = Math.max(0, now - start);
      const s = Math.floor(diff / 1000);
      const days = Math.floor(s / 86400);
      const hours = Math.floor((s % 86400) / 3600);
      const minutes = Math.floor((s % 3600) / 60);
      const seconds = s % 60;
      runtimeEl.textContent = String(days) + '天 ' + String(hours) + '时 ' + String(minutes) + '分 ' + String(seconds) + '秒';
      runtimeEl.classList.remove('bump');
      void runtimeEl.offsetWidth;
      runtimeEl.classList.add('bump');
      const next = 1000 - (now % 1000);
      setTimeout(tick, next);
    }
    tick();
    // posts list
    fetch("/api/posts")
      .then(r => r.json())
      .then(list => {
        const box = document.getElementById("postsList");
        if (!box) return;
        if (!Array.isArray(list) || list.length === 0) { box.textContent = "暂无文章"; return; }
        box.innerHTML = list.map(p => {
          return `<div style="padding:10px 0;border-bottom:1px solid var(--line);display:flex;justify-content:space-between;gap:12px;">
            <a href="/posts/${p.slug}.html" target="_blank" rel="noopener">${p.title}</a>
            <span style="color:var(--muted);font-size:12px;">${p.createdAt}</span>
          </div>`;
        }).join("");
      })
      .catch(() => {
        const box = document.getElementById("postsList");
        if (box) box.textContent = "加载失败";
      });

  </script>
</body>
</html>
